{% extends "head.html" %}

{% block content %}
  <!-- Order summary -->
  <div class="row">
    <!-- about tree-fiddy amirite -->
    <div class="col-md-10" style="margin-left: 350px">
        <!-- title and books -->
        {% if cart %}
        <div class="row">
            <div class="col-md-5">
              <h3>Order Summary</h3>
            </div>
            <div class="col-md-2">
              <h4>Qty.</h4>
            </div>
            <div class="col-md-2" style="margin-left: 10px">
              <h4>Price</h4>
            </div>
            <div class="col-md-8">
              <hr>
            </div>
        </div>
          {% for entry in cart %}
            {% set book = entry['book'] %}
            {% set qty  = entry['count'] | int %}
            {% set price = entry['price'] | float %}
            <div class="row">
              <div class="col-md-5">
                <h4>{{ book[1] }}</h4>
              </div>
              <div class="col-md-2" style="margin-left: 10px">
                <h4>{{ qty }}</h4>
              </div>
              <div class="col-md-2">
                <h4>${{ qty * price }}</h4>
              </div>
              <div class="col-md-8">
                <hr>
              </div>
            </div>
          {% endfor %}
          <!-- Subtotal shipping and tax -->
          <div class="row">
            <div class="col-md-5" style="margin-left: 10px">
              <h4>Subtotal</h4>
            </div>
            <div class="col-md-2">
              <h4>{{ cart_count }}</h4>
            </div>
            <div class="col-md-2">
              <h4>${{ subtotal }}</h4>
            </div>
            <div class="col-md-8">
              <hr>
            </div>
          </div>
          <div class="row">
            <div class="col-md-5" style="margin-left: 10px">
              <h4>Shipping</h4>
            </div>
            <div class="col-md-1 col-md-offset-2">
              <h4>$14.99</h4>
            </div>
            <div class="col-md-8">
              <hr>
            </div>
          </div>
          <div class="row">
            <div class="col-md-5" style="margin-left: 10px">
              <h4>Tax</h4>
            </div>
            <div class="col-md-1 col-md-offset-2">
              <h4>${{ tax }}</h4>
            </div>
            <div class="col-md-8">
              <hr>
            </div>
          </div>
          <div class="row">
            <div class="col-md-1 col-md-offset-5">
              <h4>Total:</h4>
            </div>
            <div class="col-md-1 col-md-offset-1">
              <h4>${{ subtotal + 14.99 + tax }}</h4>
            </div>
            <div class="col-md-8">
              <hr>
            </div>
          </div>
        {% else %}
          <h1>Cart is empty!</h1>
        {% endif %}
      </div>
    </div>
  <!-- Forms forms forms kill me please -->
    <div class="row" style="margin-top: 25px">
      <!-- WTForms ~ Literally amirite!?!?!?!? -->
      <form action="/checkout" method="post">
        <!-- Payment information -->
        <div class="row">
          <div class="col-md-6 col-md-offset-4">
            <div class="row">
              <div class="col-md-4">
                <h3>Payment Information</h3>
              </div>
              <div class="col-md-1" style="margin-top: 20px; margin-left: 12px">
                <a href="/checkout?payment=cc"><button type="button">Credit</button></a>
              </div>
              <div class="col-md-1" style="margin-top: 20px; margin-left: 25px">
                <a href="/checkout?payment=pp"><button type="button">PayPal</button></a>
              </div>
              <div class="col-md-3" style="margin-top: 20px; margin-left: 30px">
                <a href="/checkout?payment=fa"><button type="button">Financial Aid</button></a>
              </div>
            </div>
          </div>
          {% if payment == 'cc' %}
            <div class="col-md-4 col-md-offset-4">
              <h3>CC</h3>
            </div>
          {% elif payment == 'pp' %}
            <div class="col-md-4 col-md-offset-4">
              <h3>PP</h3>
            </div>
          {% elif payment == 'fa' %}
            <div class="col-md-4 col-md-offset-4">
              <h3>FA</h3>
            </div>
          {% else %}
            <div class="col-md-4 col-md-offset-4">
              <h3>NO</h3>
            </div>
          {% endif %}
        </div>
        <!-- Shipping address -->
        <div class="row">
          <div class="col-md-7 col-md-offset-4">
            <h3>Shipping Address</h3>
          </div>
          <div class="col-md-4 col-md-offset-4">
            {{ billing_form.shipping_name(size=75, placeholder="Name...") }}<br><br>
          </div>
          <div class="col-md-4 col-md-offset-4">
            {{ billing_form.shipping_addr(size=75, placeholder="Address...") }}<br><br>
          </div>
          <div class="col-md-6 col-md-offset-4">
            {{ billing_form.shipping_state(size=35, placeholder="State...") }}
            &nbsp;
            {{ billing_form.shipping_zip(size=35, placeholder="ZIP...") }}
          </div>
        </div>
        <!-- Billing address -->
      </form>
    </div>
{% endblock %}
